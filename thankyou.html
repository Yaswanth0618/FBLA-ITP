<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Thank You!</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="thank-you-container">
        <h1>🎉 Thank You for Playing! 🎉</h1>
        <p>Your choices have shaped your adventure. View or download your journey summary below.</p>

        <pre id="report"></pre>
        <button id="download-report">📥 Download Adventure Report</button>
        <button onclick="window.location.href='index.html'">🏠 Back to Home</button>
    </div>

    <script>
        document.addEventListener("DOMContentLoaded", function () {
            let userChoices = JSON.parse(localStorage.getItem("userChoices")) || [];
            let storyContent = JSON.parse(localStorage.getItem("storyData")) || {};
            let reportText = "📖 Adventure Summary\n====================\n\n";

            if (userChoices.length === 0) {
                reportText += "No choices were recorded.";
            } else {
                let step = 1;
                for (let choice of userChoices) {
                    let storyStep = storyContent[choice];
                    if (storyStep) {
                        reportText += `Step ${step}: ${storyStep.text}\n`;
                        reportText += `👉 You chose: ${choice.toUpperCase()}\n\n`;
                        step++;
                    }
                }
                reportText += "🎉 The End! 🎉\n";
            }

            document.getElementById("report").textContent = reportText;

            // Download TXT File
            document.getElementById("download-report").addEventListener("click", function () {
                const blob = new Blob([reportText], { type: "text/plain" });
                const a = document.createElement("a");
                a.href = URL.createObjectURL(blob);
                a.download = "Adventure_Report.txt";
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
            });
        });
    </script>
</body>
</html>
